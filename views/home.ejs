<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labour Link - Find Skilled Professionals Near You</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/home.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="/css/calculator.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-hands-helping me-2"></i>
                <span>LabourLink</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#how-it-works">How It Works</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#services">Services</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#nearby-map">Find Nearby</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#featured-pros">Professionals</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#jobs">Available Jobs</a>
                    </li>
                </ul>
                <div class="navbar-nav">
                    <% if (user) { %>
                        <% if (user.userType === 'customer') { %>
                            <a class="nav-link" href="/profile/customer">
                                <i class="fas fa-user me-1"></i>My Profile
                            </a>
                        <% } else { %>
                            <a class="nav-link" href="/profile/labour">
                                <i class="fas fa-tools me-1"></i>My Profile
                            </a>
                        <% } %>
                        <a class="nav-link" href="/logout">
                            <i class="fas fa-sign-out-alt me-1"></i>Logout
                        </a>
                    <% } else { %>
                        <a class="nav-link" href="/login">
                            <i class="fas fa-sign-in-alt me-1"></i>Login
                        </a>
                        <a class="nav-link" href="/login">
                            <i class="fas fa-user-plus me-1"></i>Register
                        </a>
                    <% } %>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center min-vh-100">
                <div class="col-lg-6">
                    <div class="hero-content">
                        <h1 class="hero-title">
                            Find <span class="text" style="color: #86a73a;">Skilled Professionals</span> in Your Area
                        </h1>
                        <p class="hero-subtitle">
                            Connect with trusted plumbers, electricians, carpenters, painters, and more. 
                            Get your work done quickly, affordably, and professionally.
                        </p>
                        <div class="hero-stats">
                            <div class="stat">
                                <h3><%= stats.totalLabours.toLocaleString() %></h3>
                                <p>Skilled Professionals</p>
                            </div>
                            <div class="stat">
                                <h3><%= stats.totalCustomers.toLocaleString() %></h3>
                                <p>Happy Customers</p>
                            </div>
                            <div class="stat">
                                <h3><%= stats.completedJobs.toLocaleString() %></h3>
                                <p>Jobs Completed</p>
                            </div>
                        </div>
                        <div class="hero-buttons">
                            <% if (user && user.userType === 'customer') { %>
                                <a href="/find-labour" class="btn btn-primary btn-lg me-3">
                                    <i class="fas fa-search me-2"></i>Find Professionals
                                </a>
                            <% } else if (user && user.userType === 'labour') { %>
                                <a href="/profile/labour" class="btn btn-primary btn-lg me-3">
                                    <i class="fas fa-briefcase me-2"></i>View My Profile
                                </a>
                            <% } else { %>
                                <a href="/login" class="btn btn-primary btn-lg me-3">
                                    <i class="fas fa-search me-2"></i>Find Professionals
                                </a>
                                <a href="/login" class="btn btn-outline-light btn-lg">
                                    <i class="fas fa-tools me-2"></i>Join as Professional
                                </a>
                            <% } %>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="hero-image">
                        <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=600&h=600&fit=crop" 
                             alt="Skilled Professionals" class="img-fluid">
                        <div class="floating-card card-1">
                            <div class="card-content">
                                <i class="fas fa-bolt text-warning"></i>
                                <div>
                                    <h6>Electrician</h6>
                                    <p>Available Now</p>
                                </div>
                            </div>
                        </div>
                        <div class="floating-card card-2">
                            <div class="card-content">
                                <i class="fas fa-tint text-primary"></i>
                                <div>
                                    <h6>Plumber</h6>
                                    <p>15+ Years Exp</p>
                                </div>
                            </div>
                        </div>
                        <div class="floating-card card-3">
                            <div class="card-content">
                                <i class="fas fa-paint-roller text-success"></i>
                                <div>
                                    <h6>Painter</h6>
                                    <p>4.8 ★ Rating</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="section-how-it-works">
        <div class="container">
            <div class="section-header text-center">
                <h2>How LabourLink Works</h2>
                <p class="section-subtitle">Get your work done in 3 simple steps</p>
            </div>
            <div class="row">
                <div class="col-lg-4">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <i class="fas fa-search step-icon"></i>
                        <h4>Search & Choose</h4>
                        <p>Browse through verified professionals in your area. Check ratings, reviews, and portfolios.</p>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <i class="fas fa-comments step-icon"></i>
                        <h4>Contact & Discuss</h4>
                        <p>Message the professional directly to discuss your requirements and get a quote.</p>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <i class="fas fa-check-circle step-icon"></i>
                        <h4>Hire & Get Work Done</h4>
                        <p>Hire the professional and get quality work done. Pay securely after satisfaction.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section id="nearby-map" class="section-map">
        <div class="container">
            <div class="section-header text-center">
                <h2>Find Professionals Near You</h2>
                <p class="section-subtitle">Browse skilled workers available in your area on our interactive map</p>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="map-container">
                        <div class="map-overlay">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="autoLocate" checked>
                                <label class="form-check-label" for="autoLocate">
                                    <i class="fas fa-location-crosshairs me-1"></i>Auto-locate
                                </label>
                            </div>
                        </div>
                        <div id="labourMap"></div>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-12 text-center">
                    <p class="text-muted">
                        <i class="fas fa-info-circle me-2"></i>
                        Click on markers to view professional details and contact information
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="section-services">
        <div class="container">
            <div class="section-header text-center">
                <h2>Our Services</h2>
                <p class="section-subtitle">Professional services for all your needs</p>
            </div>
            <div class="row">
                <div class="col-md-3 col-6">
                    <div class="service-card">
                        <i class="fas fa-tint"></i>
                        <h5>Plumbing</h5>
                        <p>Pipe repairs, installation, maintenance</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="service-card">
                        <i class="fas fa-bolt"></i>
                        <h5>Electrical</h5>
                        <p>Wiring, repairs, installations</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="service-card">
                        <i class="fas fa-hammer"></i>
                        <h5>Carpentry</h5>
                        <p>Furniture, repairs, custom work</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="service-card">
                        <i class="fas fa-paint-roller"></i>
                        <h5>Painting</h5>
                        <p>Home, office, interior, exterior</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="service-card">
                        <i class="fas fa-cube"></i>
                        <h5>Masonry</h5>
                        <p>Brickwork, concrete, repairs</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="service-card">
                        <i class="fas fa-fan"></i>
                        <h5>AC Repair</h5>
                        <p>Installation, maintenance, repair</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="service-card">
                        <i class="fas fa-tree"></i>
                        <h5>Gardening</h5>
                        <p>Landscaping, maintenance</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="service-card">
                        <i class="fas fa-broom"></i>
                        <h5>Cleaning</h5>
                        <p>Home, office, deep cleaning</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Professionals -->
    <section id="featured-pros" class="section-featured">
        <div class="container">
            <div class="section-header text-center">
                <h2>Featured Professionals</h2>
                <p class="section-subtitle">Top-rated professionals trusted by our community</p>
            </div>
            <div class="row">
                <% if (featuredLabours.length > 0) { %>
                    <% featuredLabours.forEach(function(labour, index) { %>
                        <div class="col-lg-4 col-md-6">
                            <div class="professional-card">
                                <div class="card-header">
                                    <img src="<%= labour.profileImage || '/images/default-labour.png' %>" 
                                         alt="<%= labour.name %>" class="profile-img">
                                    <div class="verified-badge">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <h5 class="professional-name"><%= labour.name %></h5>
                                    <span class="profession"><%= labour.profession %></span>
                                    <div class="rating">
                                        <% for(let i = 1; i <= 5; i++) { %>
                                            <% if(i <= Math.floor(labour.rating)) { %>
                                                <i class="fas fa-star"></i>
                                            <% } else if(i === Math.ceil(labour.rating) && labour.rating % 1 !== 0) { %>
                                                <i class="fas fa-star-half-alt"></i>
                                            <% } else { %>
                                                <i class="far fa-star"></i>
                                            <% } %>
                                        <% } %>
                                        <span class="rating-text">(<%= labour.totalReviews %> reviews)</span>
                                    </div>
                                    <p class="location">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <%= labour.address && labour.address.city ? labour.address.city : 'Location' %>, <%= labour.address && labour.address.state ? labour.address.state : 'Not set' %>
                                    </p>
                                    <div class="pricing">
                                        <span class="price">$<%= labour.wagePerHour %>/hour</span>
                                        <span class="experience"><%= labour.experience %></span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <% if (user) { %>
                                        <a href="/labour/<%= labour._id %>" class="btn btn-primary w-100">
                                            View Profile
                                        </a>
                                    <% } else { %>
                                        <a href="/login" class="btn btn-primary w-100">
                                            View Profile
                                        </a>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="col-12 text-center">
                        <p class="text-muted">No featured professionals available at the moment.</p>
                    </div>
                <% } %>
            </div>
            <div class="text-center mt-4">
                <% if (user && user.userType === 'customer') { %>
                    <a href="/find-labour" class="btn btn-outline-primary">
                        View All Professionals <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                <% } else { %>
                    <a href="/login" class="btn btn-outline-primary">
                        View All Professionals <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                <% } %>
            </div>
        </div>
    </section>

    <!-- Available Jobs Section -->
    <section id="jobs" class="section-jobs">
        <div class="container">
            <div class="section-header text-center">
                <h2>Available Jobs</h2>
                <p class="section-subtitle">Latest job postings from customers</p>
            </div>
            <div class="row">
                <% if (recentJobs.length > 0) { %>
                    <% recentJobs.forEach(function(job) { %>
                        <div class="col-lg-6">
                            <div class="job-card">
                                <div class="job-header">
                                    <h5 class="job-title"><%= job.service %></h5>
                                    <span class="job-badge">New</span>
                                </div>
                                <p class="job-description"><%= job.description %></p>
                                <div class="job-details">
                                    <div class="detail">
                                        <i class="fas fa-user"></i>
                                        <span><%= job.customerId.name %></span>
                                    </div>
                                    <div class="detail">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span><%= job.address.city %></span>
                                    </div>
                                    <% if (job.amount) { %>
                                        <div class="detail">
                                            <i class="fas fa-rupee-sign"></i>
                                            <span>₹<%= job.amount %></span>
                                        </div>
                                    <% } %>
                                </div>
                                <div class="job-footer">
                                    <span class="job-date">
                                        Posted <%= new Date(job.createdAt).toLocaleDateString() %>
                                    </span>
                                    <% if (user && user.userType === 'labour') { %>
                                        <button class="btn btn-success btn-sm">
                                            Apply Now
                                        </button>
                                    <% } else { %>
                                        <a href="/login" class="btn btn-success btn-sm">
                                            Login to Apply
                                        </a>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="col-12 text-center">
                        <div class="no-jobs">
                            <i class="fas fa-briefcase fa-3x text-muted mb-3"></i>
                            <h5>No Jobs Available</h5>
                            <p class="text-muted">Check back later for new job postings</p>
                        </div>
                    </div>
                <% } %>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="section-cta">
        <div class="container">
            <div class="cta-content text-center">
                <h2>Ready to Get Started?</h2>
                <p>Join thousands of customers and professionals using LabourLink</p>
                <div class="cta-buttons">
                    <% if (!user) { %>
                        <a href="/login" class="btn btn-light btn-lg me-3">
                            <i class="fas fa-search me-2"></i>Find Professionals
                        </a>
                        <a href="/login" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-tools me-2"></i>Join as Professional
                        </a>
                    <% } else if (user.userType === 'customer') { %>
                        <a href="/find-labour" class="btn btn-light btn-lg me-3">
                            <i class="fas fa-search me-2"></i>Find Professionals
                        </a>
                        <a href="/profile/customer" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-user me-2"></i>My Profile
                        </a>
                    <% } else { %>
                        <a href="/profile/labour" class="btn btn-light btn-lg me-3">
                            <i class="fas fa-briefcase me-2"></i>My Profile
                        </a>
                        <a href="/find-labour" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-search me-2"></i>Browse Jobs
                        </a>
                    <% } %>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <div class="footer-brand">
                        <i class="fas fa-hands-helping me-2"></i>
                        <span>LabourLink</span>
                    </div>
                    <p class="footer-text">
                        Connecting customers with skilled professionals in their vicinity. 
                        Quality work, trusted professionals, happy customers.
                    </p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-6">
                    <h6>For Customers</h6>
                    <ul class="footer-links">
                        <li><a href="/find-labour">Find Professionals</a></li>
                        <li><a href="#how-it-works">How It Works</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#">Pricing</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-6">
                    <h6>For Professionals</h6>
                    <ul class="footer-links">
                        <li><a href="/login">Join as Professional</a></li>
                        <li><a href="#jobs">Browse Jobs</a></li>
                        <li><a href="#">Success Stories</a></li>
                        <li><a href="#">Resources</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-6">
                    <h6>Company</h6>
                    <ul class="footer-links">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-6">
                    <h6>Support</h6>
                    <ul class="footer-links">
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Safety Tips</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 LabourLink. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize the map when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing map...');
            
            // Default center (India)
            const defaultCenter = [20.5937, 78.9629];
            
            // Create map
            const map = L.map('labourMap').setView(defaultCenter, 5);
            console.log('Map created');
            
            // Add tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);
            
            // Parse labours data from EJS
            try {
                const labours = <%- typeof allLabours !== 'undefined' ? allLabours : '[]' %>;
                console.log('Found labours:', labours ? labours.length : 0);
                
                // Add markers for each labour
                let markersAdded = 0;
                if (labours && labours.length > 0) {
                    labours.forEach(labour => {
                        if (labour.location && labour.location.coordinates && 
                            labour.location.coordinates.length === 2 &&
                            labour.location.coordinates[0] !== 0 && 
                            labour.location.coordinates[1] !== 0) {
                            
                            const [lng, lat] = labour.location.coordinates;
                            
                            // Create custom icon
                            const customIcon = L.divIcon({
                                className: 'labour-marker',
                                html: '<i class="fas fa-user" style="color: white; font-size: 10px;"></i>',
                                iconSize: [20, 20],
                                iconAnchor: [10, 10]
                            });
                            
                            // Create popup content
                            const popupContent = `
                                <div class="map-popup">
                                    <div class="d-flex align-items-center mb-2">
                                        ${labour.profileImage ? 
                                            `<img src="${labour.profileImage}" alt="${labour.name}" class="popup-img" onerror="this.style.display='none'">` : 
                                            '<i class="fas fa-user fa-2x text-primary me-2"></i>'
                                        }
                                        <div>
                                            <h6 class="mb-0">${labour.name}</h6>
                                            <p class="text-muted mb-0">${labour.profession || 'Professional'}</p>
                                        </div>
                                    </div>
                                    <div class="rating mb-2">
                                        ${Array.from({length: 5}, (_, i) => 
                                            `<i class="fas fa-star${i < Math.floor(labour.rating || 0) ? '' : '-half-alt'} text-warning"></i>`
                                        ).join('')}
                                        <span class="ms-1">${(labour.rating || 0).toFixed(1)}</span>
                                    </div>
                                    <p class="mb-1"><strong>$${labour.wagePerHour || '0'}/hour</strong></p>
                                    <a href="/labour/${labour._id}" class="btn btn-sm btn-primary w-100">View Profile</a>
                                </div>
                            `;
                            
                            // Add marker to map
                            L.marker([lat, lng], { icon: customIcon })
                                .addTo(map)
                                .bindPopup(popupContent);
                            
                            markersAdded++;
                        }
                    });
                }
                
                console.log(`Added ${markersAdded} markers to the map`);
                
                // Add sample markers if no labours have locations
                if (markersAdded === 0) {
                    const sampleLocations = [
                        { lat: 28.6139, lng: 77.2090, name: "Sample Electrician", profession: "Electrician" }, // Delhi
                        { lat: 19.0760, lng: 72.8777, name: "Sample Plumber", profession: "Plumber" }, // Mumbai
                        { lat: 12.9716, lng: 77.5946, name: "Sample Carpenter", profession: "Carpenter" } // Bangalore
                    ];
                    
                    sampleLocations.forEach(location => {
                        const popupContent = `
                            <div class="map-popup">
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-user fa-2x text-primary me-2"></i>
                                    <div>
                                        <h6 class="mb-0">${location.name}</h6>
                                        <p class="text-muted mb-0">${location.profession}</p>
                                    </div>
                                </div>
                                <p class="mb-2">Sample professional location</p>
                                <p class="text-muted small">Add location data to your professionals to see them here</p>
                            </div>
                        `;
                        
                        L.marker([location.lat, location.lng])
                            .addTo(map)
                            .bindPopup(popupContent);
                    });
                    
                    console.log('Added sample markers for demonstration');
                }
                
            } catch (error) {
                console.error('Error processing labours data:', error);
            }
            
            // Auto-locate user
            const autoLocateCheckbox = document.getElementById('autoLocate');
            
            if (autoLocateCheckbox.checked && navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const userLat = position.coords.latitude;
                        const userLng = position.coords.longitude;
                        
                        console.log('User location found:', userLat, userLng);
                        
                        // Add user location marker
                        L.marker([userLat, userLng])
                            .addTo(map)
                            .bindPopup('Your Location')
                            .openPopup();
                        
                        // Center map on user location
                        map.setView([userLat, userLng], 12);
                    },
                    (error) => {
                        console.log('Geolocation error:', error);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000
                    }
                );
            }
            
            // Toggle auto-locate
            autoLocateCheckbox.addEventListener('change', function() {
                if (this.checked && navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const userLat = position.coords.latitude;
                            const userLng = position.coords.longitude;
                            map.setView([userLat, userLng], 12);
                        },
                        (error) => {
                            console.log('Geolocation error:', error);
                        }
                    );
                }
            });
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Navbar background on scroll
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 100) {
                navbar.classList.add('navbar-scrolled');
            } else {
                navbar.classList.remove('navbar-scrolled');
            }
        });

        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                }
            });
        }, observerOptions);

        // Observe elements for animation
        document.querySelectorAll('.step-card, .service-card, .professional-card, .job-card, .section-map').forEach(el => {
            observer.observe(el);
        });
    </script>
    <script src="/js/calculator.js"></script>
</body>
</html>